{% extends "base2.html" %}
{% block head %}
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, follow">
</head>
{% endblock %}
{% block body %}
<!-- POSTED PLAYLIST -->
<div class="container justify-content-start" style="margin-right: -25%; padding-right:-35%; margin-top: 2%; margin-bottom: 1%;">
    <button onclick="getPlaylist()" type="button" class="btn btn-info">Get random playlist</button>
</div>

<div class="container">

    <div class="row justify-content-end">

        <div class="col-sm-4">
            <div class="card text-white card-has-bg click-col mx-auto" id="playlist_card" href="#" >
                <img class="card-img d-none" src="https://source.unsplash.com/600x900/?computer,design" alt="Goverment Lorem Ipsum Sit Amet Consectetur dipisi?">
                <div class="card-img-overlay d-flex flex-column">
                    <div class="card-body">
                        <small class="card-meta mb-2" id="playlist_id" >Playlist ID:</small>
                        <h4 class="card-title mt-0" id="playlist_name">Click the button to get a playlist!<a class="text-white" href="#"></a></h4>

                        <a id="playlist_text" href=""></a>
                    </div>
                    <div class="card-footer">
                        <div class="media">
                            <img class="mr-3 rounded-circle" src="https://moonvillageassociation.org/wp-content/uploads/2018/06/default-profile-picture1.jpg" alt="Generic placeholder image" style="max-width:50px">
                            <div class="media-body">
                                <h6 class="my-0 text-white d-block">Submitted by</h6>
                                <h6 id="playlist_credits_text"></h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div></div>
    </div>

    <div class="row justify-content-start">
        <body data-new-gr-c-s-check-loaded="14.1012.0" data-gr-ext-installed="">
            <div class="bg-contact2">
                <div class="container-contact2" style="margin-left:-30%; margin-top: -61%;">
                    <div class="wrap-contact2">
                        <form class="contact2-form validate-form" name="playlistform" method='post' onsubmit="return validate()" >
                        <span class="contact2-form-title">
                            Submit your playlist
                        </span>

                            <div class="wrap-input2 validate-input" data-validate="Playlist Name is Required">
                                <input class="input2" type="text" name="playlistname" id="playlistname" placeholder="Playlist Name" required>
                                <!-- <span class="focus-input2" data-placeholder=" NAME"></span> -->

                            </div>

                            <div class="wrap-input2 validate-input" data-validate="">
                                <input class="input2" type="text" name="username" id="username" placeholder="Your Username" required>
                                <!-- <span class="focus-input2" data-placeholder="AUTHOR/CREDITS"></span> -->
                            </div>

                            <div class="wrap-input2 validate-input" data-validate="Playlist URL is Required">
                                <input class="input2" name="url" placeholder="https://open.spotify.com/playlist/4CuSTeoPQlN3ltgbaJCfrX?si=ab3d0295bc334f69" required></textarea>
                                <!--  <span class="focus-input2" data-placeholder="PLAYLIST URL"></span> -->
                            </div>

                            <div class="container-contact2-form-btn">
                                <div class="wrap-contact2-form-btn">
                                    <div class="contact2-form-bgbtn"></div>
                                    <button class="contact2-form-btn">
                                        Submit Playlist
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </body>
    </div>

</div>
<!-- END OF SEE POSTED PLAYLIST -->


<script type="text/javascript" async="" src="{{url_for('ks.static', filename='display.js')}}"></script>
<script>
    const getPlaylist = () => {
        $.getJSON('{{websiteurl}}' + '/api/random', (data) => {
        document.getElementById("playlist_credits_text").innerHTML = data.username
        document.getElementById("playlist_name").innerHTML = data.playlistname
        document.getElementById("playlist_text").href = data.url
        document.getElementById("playlist_text").innerHTML = data.url
        document.getElementById("playlist_id").innerHTML = "Playlist ID: " + data.id
        console.log(data)
        });
    }
    const ee = () => {
        console.log('ee')
    }
    console.log('hi')
</script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="{{url_for('ks.static', filename='style.css')}}">

<!-- SUBMIT PORTION -->







<script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
    function validate() {
        var x = document.forms["playlistform"]["url"].value;
        console.log(x)
        if (!x.startsWith('https://open.spotify.com')) {
            alert("Invalid spotify link");
            return false;
        }
    }
</script>

<script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;rayId&quot;:&quot;652a4c10eec33660&quot;,&quot;token&quot;:&quot;cd0b4b3a733644fc843ef0b185f98241&quot;,&quot;version&quot;:&quot;2021.5.1&quot;,&quot;si&quot;:10}"></script>
</body>
</html>
<link rel="stylesheet" href="{{url_for('static', filename='formstyle.css')}}">
<!-- END OF SUBMIT PORTION -->

</html>
{% endblock %}
